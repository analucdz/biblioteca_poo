import java.util.Scanner;

public class Main {
    public static void main(String[] args) {

        Scanner scanner = new Scanner(System.in);
        classeBiblioteca biblioteca = new classeBiblioteca();

        System.out.println("ğŸŒŸ Bem-vindo ao Sistema de Biblioteca POO! ğŸŒŸ");
        System.out.println("===========================================");

        while (true) {
            System.out.println("\nğŸ“– MENU PRINCIPAL:");
            System.out.println("1ï¸âƒ£ - Adicionar Livro");
            System.out.println("2ï¸âƒ£ - Adicionar Revista");
            System.out.println("3ï¸âƒ£ - Pesquisar Material por TÃ­tulo");
            System.out.println("4ï¸âƒ£ - Excluir Material");
            System.out.println("5ï¸âƒ£ - Listar Todos os Materiais");
            System.out.println("0ï¸âƒ£ - Sair");
            System.out.print("ğŸ‘‰ Escolha uma opÃ§Ã£o: ");

            int opcao;
            try {
                opcao = Integer.parseInt(scanner.nextLine());
            } catch (NumberFormatException e) {
                System.out.println("\nâŒ OpÃ§Ã£o invÃ¡lida! Por favor, digite um nÃºmero. âŒ");
                continue;
            }

            switch (opcao) {
                case 1:
                    adicionarLivro(scanner, biblioteca);
                    break;
                case 2:
                    adicionarRevista(scanner, biblioteca);
                    break;
                case 3:
                    pesquisarMaterial(scanner, biblioteca);
                    break;
                case 4:
                    excluirMaterial(scanner, biblioteca);
                    break;
                case 5:
                    biblioteca.listarMateriais();
                    break;
                case 0:
                    System.out.println("\nğŸ‘‹ AtÃ© logo! Obrigado por usar nosso sistema! ğŸ‘‹");
                    scanner.close();
                    return;
                default:
                    System.out.println("\nâš ï¸ OpÃ§Ã£o invÃ¡lida! Por favor, tente novamente. âš ï¸");
            }
        }
    }

    private static void adicionarLivro(Scanner scanner, classeBiblioteca biblioteca) {
        System.out.println("\nğŸ“˜ ADICIONAR NOVO LIVRO");
        System.out.println("-----------------------");

        System.out.print("Digite o tÃ­tulo do livro: ");
        String titulo = scanner.nextLine();

        System.out.print("Digite o autor do livro: ");
        String autor = scanner.nextLine();

        System.out.println("\nğŸ“š GÃªneros disponÃ­veis:");
        for (Genero genero : Genero.values()) {
            System.out.println("- " + genero);
        }

        System.out.print("Digite o gÃªnero do livro: ");
        String generoStr = scanner.nextLine();

        try {
            Genero genero = Genero.valueOf(generoStr);
            classeLivro livro = new classeLivro(titulo, autor, genero);
            biblioteca.adicionarMaterial(livro);
            System.out.println("\nğŸ‰ Livro adicionado com sucesso! Boa leitura! ğŸ‰");
        } catch (IllegalArgumentException e) {
            System.out.println("\nâŒ GÃªnero invÃ¡lido! Por favor, escolha um gÃªnero da lista. âŒ");
        }
    }

    private static void adicionarRevista(Scanner scanner, classeBiblioteca biblioteca) {
        System.out.println("\nğŸ“° ADICIONAR NOVA REVISTA");
        System.out.println("-------------------------");

        System.out.print("Digite o tÃ­tulo da revista: ");
        String titulo = scanner.nextLine();

        System.out.print("Digite o autor/editora da revista: ");
        String autor = scanner.nextLine();

        System.out.print("Digite o nÃºmero da revista: ");
        try {
            int numero = Integer.parseInt(scanner.nextLine());
            classeRevista revista = new classeRevista(titulo, autor, numero);
            biblioteca.adicionarMaterial(revista);
            System.out.println("\nğŸ‰ Revista adicionada com sucesso! Boa leitura! ğŸ‰");
        } catch (NumberFormatException e) {
            System.out.println("\nâŒ NÃºmero invÃ¡lido! Por favor, digite um nÃºmero inteiro positivo. âŒ");
        }
    }

    private static void pesquisarMaterial(Scanner scanner, classeBiblioteca biblioteca) {
        System.out.println("\nğŸ” PESQUISAR MATERIAL");
        System.out.println("---------------------");

        System.out.print("Digite o tÃ­tulo do material que deseja pesquisar: ");
        String titulo = scanner.nextLine();

        System.out.println("\nğŸ” Resultados da pesquisa:");
        biblioteca.pesquisarPorTitulo(titulo);
    }

    private static void excluirMaterial(Scanner scanner, classeBiblioteca biblioteca) {
        System.out.println("\nğŸ—‘ï¸ EXCLUIR MATERIAL");
        System.out.println("------------------");

        System.out.print("Digite o tÃ­tulo do material que deseja excluir: ");
        String titulo = scanner.nextLine();

        System.out.println("\nâš ï¸ Confirmar exclusÃ£o do material: " + titulo);
        System.out.print("Digite 'SIM' para confirmar: ");
        String confirmacao = scanner.nextLine();

        if (confirmacao.equalsIgnoreCase("SIM")) {
            biblioteca.excluirMaterial(titulo);
            System.out.println("\nğŸ—‘ï¸ Material removido da biblioteca! ğŸ—‘ï¸");
        } else {
            System.out.println("\nâœ… OperaÃ§Ã£o cancelada. Nada foi excluÃ­do. âœ…");
        }
    }
}
